api_handlers:

attributes:
  location_based:
    - name: internal_network
      params:
        cidr: 192.168.0.0/24
    - name: external_network
      params:
        cidr: 0.0.0.0/0
  time_based:
    - name: business_hours
      params:
        - from: '10:00'
        - to: '17:00'
    - name: off_hours
      params:
        - from: '17:00'
        - to: 09:00
middlewares:
  - fn_1: base4.utilities.access_control.middlewares:ac_test_middleware_true
roles:
  __common__:
    attributes:
      - location_based.internal_network
    permissions:
      - tenants.user_logout
      - tenants.user_session
    rate_limit:
      calls: 100
      period: 3600
  admin:
    attributes:
      - time_based.business_hours
    inherits:
      - __common__
#    permissions:
#      - new_service.get_by_key
#      - new_service.healthy
  user:
    attributes:
      - location_based.external_network
    inherits:
      - __common__
    permissions:
      - user_profile.read
      - user_profile.update
      - tenants.user_login:
          middlewares:
            - fn_1
